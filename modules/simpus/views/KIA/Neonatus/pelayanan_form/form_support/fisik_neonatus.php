 <form id="fisikNeoForm">
     <div class="row">
         <!-- kolom kiri -->
         <div class="col-md-6">
             <div class="form-group">
                 <label for="kulit" class="form-label">Kulit</label>
                 <select id="kulit" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiKulit" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiKulit" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="mata" class="form-label">Mata</label>
                 <select id="mata" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiMata" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiMata" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="mulut" class="form-label">Mulut</label>
                 <select id="mulut" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiMulut" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiMulut" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="kaki" class="form-label">Kaki</label>
                 <select id="kaki" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiKaki" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiKaki" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="reflek" class="form-label">Reflek</label>
                 <select id="reflek" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiReflek" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiReflek" class="form-control"></textarea>
             </div>
         </div>

         <!-- kolom kanan -->
         <div class="col-md-6">
             <div class="form-group">
                 <label for="perut" class="form-label">Perut</label>
                 <select id="perut" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiPerut" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiPerut" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="punggung" class="form-label">Punggung</label>
                 <select id="punggung" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiPunggung" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiPunggung" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="lubangAnus" class="form-label">Lubang Anus</label>
                 <select id="lubangAnus" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiLubangAnus" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiLubangAnus" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="lubangAlatKelamin" class="form-label">Alat Kelamin</label>
                 <select id="lubangAlatKelamin" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiAlatKelamin" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiAlatKelamin" class="form-control"></textarea>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="lubangTangan" class="form-label">Tangan</label>
                 <select id="lubangTangan" class="form-control">
                     <option value="" selected>Select...</option>
                     <option value="1">Dalam Batas Normal</option>
                     <option value="2">Abnormal</option>
                 </select>
             </div>

             <div class="form-group" style="margin-top: 20px;">
                 <label for="deskripsiTangan" class="form-label">Deskripsi</label>
                 <textarea id="deskripsiTangan" class="form-control"></textarea>
             </div>
         </div>
     </div>
     <div class="row" style="display: flex; justify-content: end; margin-top: 20px;">
         <div class="col-md-3">
             <button type="button" id="fisikNeoBtn" class="btn btn-success" style="width: 100%;">
                 <i class="glyphicon glyphicon-floppy-disk"></i> Simpan
             </button>
         </div>
     </div>
 </form>
 <script>
    function FisikNeo() {
    // Get the form element
    const $form = $('#fisikNeoForm');  // Changed from $('#form_kn3') to match the form without ID
    
    // Get all values using the form as context
    const kulit = $form.find('#kulit').val();
    const deskripsiKulit = $form.find('#deskripsiKulit').val();
    const mata = $form.find('#mata').val();
    const deskripsiMata = $form.find('#deskripsiMata').val();
    const mulut = $form.find('#mulut').val();
    const deskripsiMulut = $form.find('#deskripsiMulut').val();
    const kaki = $form.find('#kaki').val();
    const deskripsiKaki = $form.find('#deskripsiKaki').val();
    const reflek = $form.find('#reflek').val();
    const deskripsiReflek = $form.find('#deskripsiReflek').val();
    const perut = $form.find('#perut').val();
    const deskripsiPerut = $form.find('#deskripsiPerut').val();
    const punggung = $form.find('#punggung').val();
    const deskripsiPunggung = $form.find('#deskripsiPunggung').val();
    const lubangAnus = $form.find('#lubangAnus').val();
    const deskripsiLubangAnus = $form.find('#deskripsiLubangAnus').val();
    const lubangAlatKelamin = $form.find('#lubangAlatKelamin').val();
    const deskripsiAlatKelamin = $form.find('#deskripsiAlatKelamin').val();
    const lubangTangan = $form.find('#lubangTangan').val();
    const deskripsiTangan = $form.find('#deskripsiTangan').val();

    // Validation - checking required fields
    if (kulit === '' || kulit === undefined || 
        mata === '' || mata === undefined || 
        mulut === '' || mulut === undefined || 
        kaki === '' || kaki === undefined || 
        reflek === '' || reflek === undefined || 
        perut === '' || perut === undefined || 
        punggung === '' || punggung === undefined || 
        lubangAnus === '' || lubangAnus === undefined || 
        lubangAlatKelamin === '' || lubangAlatKelamin === undefined || 
        lubangTangan === '' || lubangTangan === undefined) {
        showSwal('warning', 'Data tidak lengkap', 'Semua pemeriksaan fisik wajib diisi!');
        return null;
    }

    return {
        kulit,
        deskripsiKulit,
        mata,
        deskripsiMata,
        mulut,
        deskripsiMulut,
        kaki,
        deskripsiKaki,
        reflek,
        deskripsiReflek,
        perut,
        deskripsiPerut,
        punggung,
        deskripsiPunggung,
        lubangAnus,
        deskripsiLubangAnus,
        lubangAlatKelamin,
        deskripsiAlatKelamin,
        lubangTangan,
        deskripsiTangan
    };
}

function showSwal(type, title, text) {
    const icon = (['success', 'error', 'warning', 'info'].includes(type)) ? type : 'info';
    swal(title, text, icon);
}

$(document).ready(function(){
    let data = null;

    // Updated to use the form submit button
    $('#fisikNeoBtn').on('click', function(e) {  // Changed from $('#form_kn3 #KN3Button') to form submit
        e.preventDefault();

        const formData = FisikNeo();
        if (!formData) return;

        const dataBayiBalitaFisik = {};
        const keys = Object.keys(formData);

        keys.forEach((key) => {
            if (data?.[key]) {
                dataBayiBalitaFisik[key] = {
                    value: formData[key],
                    id: data[key].id
                };
            } else {
                dataBayiBalitaFisik[key] = {
                    value: formData[key],
                    id: null
                };
            }
        });

        // Prepare data to send
        console.log(dataBayiBalitaFisik);
        // sendFormData(dataToSend);
    });
});
 </script>